<div class="row">
	<div class="col-md-5">
		<div class="panel panel-default">
			<div class="panel-heading">
				Applications
			</div>
			<div class="panel-body">
				<div class="dashboard-device-list">
			<table class="table table-bordered">
				<thead>
					<tr>
						<th>Code Name</th>
						<th>Runtime ID</th>
						<th>Status</th>
						<th>Running Device</th>
					</tr>
				</thead>
				<div >	
				<tbody ng-repeat="(id,program) in $dash.programs" uib-popover-template="'deviceMenu.html'"
						popover-placement="bottom">
					<tr>
						<th>
						   {{ program.code_name}}
						</th>
						<td>
							{{ program.id }}
						</td>
						<td>
							{{ program.status }}
						</td>
						<td>
							{{ program.engine.id }}

							
						</td>
					</tr>
				</tbody>
			</div>
			</table>

						<script type="text/ng-template" id="deviceMenu.html">
				<ul class="list-group" style="margin: -11px -16px">
					<a ng-click="$view.topProgram = program;" href="javascript:;" class="list-group-item">Display at Top pane</a>
					<a ng-click="$view.middleProgram = program;" href="javascript:;" class="list-group-item">Display at Middle pane</a>
					<a ng-click="$view.bottomProgram = program;" href="javascript:;" class="list-group-item">Display at Bottom pane</a>
					<a ng-click="program.engine.pauseCode(program.code_name, program.id)" href="javascript:;" class="list-group-item">Pause Program</a>
					<li class="list-group-item">
						<div class="form-inline">
							<select ng-model="selectedNode1"  ng-options = "data as target for (target, data) in $dash.engines" class="form-control">
								<option value="">--- Select Device ---</option>
								<option ng-repeat="(target,data) in $dash.engines" ng-value="data">{{target}}</option>
							</select>
							<button class="btn btn-sm"
							ng-class = "{'btn-danger': (program.status !== 'Paused'),'btn-success':(program.status ==='Paused')}"
									ng-click="selectedNode1.resumeCode(program.code_name, program.id)">
								Resume Program on Selected Device
							</button>
						</div>
					</li>
					<li class="list-group-item">
						<div class="form-inline">
							<select ng-model="selectedNode2" class="form-control">
								<option value="">--- Select Device ---</option>
								<option ng-repeat="(target, data) in $dash.engines" ng-value="target">{{ target }}</option>
							</select>
							<button 
									class="btn btn-sm"
									ng-class = "{'btn-danger': (program.status !== 'Running'),'btn-success':(program.status ==='Running')}"
									ng-click="program.engine.migrateCode(program.code_name, program.id, selectedNode2)"
									>
								Migrate Running Program
							</button>
						</div>
					</li>
				</ul>
			</script>		
				</div>			
			</div>
		</div>
			<div class="panel panel-default">
			<div class="panel-heading">
				<div class="btn-group" ng-init="videoChannel = 'raw'">
					<button ng-click="videoChannel = 'raw'" class="btn btn-default" ng-class="{ active: videoChannel === 'raw' }">Raw</button>
					<button ng-click="videoChannel = 'motion'" class="btn btn-default" ng-class="{ active: videoChannel === 'motion' }">Motion</button>
				</div>
				<span>Video Stream</span>
				<span class="pull-right boolean-lamp" ng-class="{ high: $service.videostream.alarm }" style="padding: 5px;">Motion</span>
			</div>
			<div class="panel-body">
				<div ng-show="videoChannel === 'raw'">
					<img ng-src="{{ $view.video_raw }}" class="img-responsive"/>
				</div>
				<div ng-show="videoChannel === 'motion'">
					<img ng-src="{{ $view.video_motion  }}" class="img-responsive"/>
				</div>
			</div>
		</div>	
		
	</div>
		
		
	<div class="col-md-7">
		
		<!-- Top Pane -->
		<code-panel code="$view.topProgram"></code-panel>
		
		<!-- Middle Pane -->
		<code-panel code="$view.middleProgram"></code-panel>
		
		<!-- Bottom Pane -->
		<code-panel code="$view.bottomProgram"></code-panel>
		
	</div>
</div>